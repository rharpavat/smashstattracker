{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="jumbotron text-center">
  <div class="container">
    <h1>Current Leaderboard</h1>
    <div class="row">
      <table class="styled-table">
        <tbody>
          <tr>
            <td class="stat">{{ leaderboard.totalwins.0 }}</td>
            <td class="player">{{ leaderboard.totalwins.1 }}</td>
            <td class="value"><div class="bolded">{{ leaderboard.totalwins.2 }}</div> (matches won)</td>
          </tr>
          <tr>
            <td class="stat">{{ leaderboard.avgrank.0 }}</td>
            <td class="player">{{ leaderboard.avgrank.1 }}</td>
            <td class="value"><div class="bolded">{{ leaderboard.avgrank.2 }}</div> (average rank)</td>
          </tr>
          <tr>
            <td class="stat">{{ leaderboard.kdratio.0 }}</td>
            <td class="player">{{ leaderboard.kdratio.1 }}</td>
            <td class="value"><div class="bolded">{{ leaderboard.kdratio.2 }}</div> (kills per death)</td>
          </tr>
        </tbody>
      </table>
    </div>
    <br/>
    <div class="row">
      <div class="col-md-5">
        <table class="styled-table">
          <tbody>
            <tr>
              <td class="stat">{{ leaderboard.totalkills.0 }}</td>
              <td class="player">{{ leaderboard.totalkills.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.totalkills.2 }}</div> (total kills)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.totaldeaths.0 }}</td>
              <td class="player">{{ leaderboard.totaldeaths.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.totaldeaths.2 }}</div> (total deaths)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.totalsds.0 }}</td>
              <td class="player">{{ leaderboard.totalsds.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.totalsds.2 }}</div> (total SDs)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.totaldmggiven.0 }}</td>
              <td class="player">{{ leaderboard.totaldmggiven.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.totaldmggiven.2 }}%</div> (total dmg given)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.totaldmgtaken.0 }}</td>
              <td class="player">{{ leaderboard.totaldmgtaken.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.totaldmgtaken.2 }}%</div> (total dmg taken)</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-7">
        <table class="styled-table">
          <tbody>
            <tr>
              <td class="stat">{{ leaderboard.avgkills.0 }}</td>
              <td class="player">{{ leaderboard.avgkills.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.avgkills.2 }}</div> (kills per round)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.avgdeaths.0 }}</td>
              <td class="player">{{ leaderboard.avgdeaths.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.avgdeaths.2 }}</div> (deaths per round)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.avgsds.0 }}</td>
              <td class="player">{{ leaderboard.avgsds.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.avgsds.2 }}</div> (SDs per round)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.avgdmggiven.0 }}</td>
              <td class="player">{{ leaderboard.avgdmggiven.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.avgdmggiven.2 }} % </div> (dmg given per round)</td>
            </tr>
            <tr>
              <td class="stat">{{ leaderboard.avgdmgtaken.0 }}</td>
              <td class="player">{{ leaderboard.avgdmgtaken.1 }}</td>
              <td class="value"><div class="bolded">{{ leaderboard.avgdmgtaken.2 }} % </div> (dmg taken per round)</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <script>
      $(document).ready(function(){

        var colorMatch = {
          'Rish'     : 'rish-text',
          'Janey'    : 'janey-text',
          'Harold'   : 'harold-text',
          'CPU'      : 'cpu-text',
          'N/A'      : 'na-text'
        };

        var curdiv;
        var pname;
        $('.player').each(function(index) {
          curdiv = $(this);
          pname = curdiv.text();
          curdiv.addClass(colorMatch[pname]);
        });
      });
    </script>
  </div>
</div>
<div class="container">
  <div class="row">
    <div class="col-md-4">
      <h3><b>Total Wins</b></h3>
      <div id="container">
        <canvas id="latesttotalwins" data-url="{% url 'latesttotalwins' %}"></canvas>
      </div>
      <script>
          renderPieChart("#latesttotalwins");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Total Wins Over Time</b></h3>
      <div id="container">
        <canvas id="totalwins" data-url="{% url 'totalwins' %}"></canvas>
      </div>
      <script>
          renderLineChart("#totalwins");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Avg. Rank Over Time</b></h3>
      <div id="container">
        <canvas id="avgrank" data-url="{% url 'avgrank' %}"></canvas>
      </div>
      <script>
          renderInverseLineChart("#avgrank");
      </script>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">
      <h3><b>Total Kills</b></h3>
      <div id="container">
        <canvas id="latesttotalkills" data-url="{% url 'latesttotalkills' %}"></canvas>
      </div>
      <script>
          renderPieChart("#latesttotalkills");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Total Kills Over Time</b></h3>
      <div id="container">
        <canvas id="totalkills" data-url="{% url 'totalkills' %}"></canvas>
      </div>
      <script>
          renderLineChart("#totalkills");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Avg. Kills Over Time</b></h3>
      <div id="container">
        <canvas id="avgkills" data-url="{% url 'avgkills' %}"></canvas>
      </div>
      <script>
          renderLineChart("#avgkills");
      </script>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">
      <h3><b>K/D Ratio Over Time</b></h3>
      <div id="container">
        <canvas id="kdratio" data-url="{% url 'kdratio' %}"></canvas>
      </div>
      <script>
          renderLineChart("#kdratio");
      </script>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">
      <h3><b>Total Deaths</b></h3>
      <div id="container">
        <canvas id="latesttotaldeaths" data-url="{% url 'latesttotaldeaths' %}"></canvas>
      </div>
      <script>
          renderPieChart("#latesttotaldeaths");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Total Deaths Over Time</b></h3>
      <div id="container">
        <canvas id="totaldeaths" data-url="{% url 'totaldeaths' %}"></canvas>
      </div>
      <script>
          renderLineChart("#totaldeaths");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Avg. Deaths Over Time</b></h3>
      <div id="container">
        <canvas id="avgdeaths" data-url="{% url 'avgdeaths' %}"></canvas>
      </div>
      <script>
          renderLineChart("#avgdeaths");
      </script>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">
      <h3><b>Total Self-Destructs</b></h3>
      <div id="container">
        <canvas id="latesttotalsds" data-url="{% url 'latesttotalsds' %}"></canvas>
      </div>
      <script>
          renderPieChart("#latesttotalsds");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Total Self-Destructs Over Time</b></h3>
      <div id="container">
        <canvas id="totalsds" data-url="{% url 'totalsds' %}"></canvas>
      </div>
      <script>
          renderLineChart("#totalsds", "line");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Avg. Self-Destructs Over Time</b></h3>
      <div id="container">
        <canvas id="avgsds" data-url="{% url 'avgsds' %}"></canvas>
      </div>
      <script>
          renderLineChart("#avgsds", "line");
      </script>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">
      <h3><b>Total Damage Given</b></h3>
      <div id="container">
        <canvas id="latesttotaldmggiven" data-url="{% url 'latesttotaldmggiven' %}"></canvas>
      </div>
      <script>
          renderPieChart("#latesttotaldmggiven");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Total Damage Given Over Time</b></h3>
      <div id="container">
        <canvas id="totaldmggiven" data-url="{% url 'totaldmggiven' %}"></canvas>
      </div>
      <script>
          renderLineChart("#totaldmggiven", "line");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Avg. Damage Given Over Time</b></h3>
      <div id="container">
        <canvas id="avgdmggiven" data-url="{% url 'avgdmggiven' %}"></canvas>
      </div>
      <script>
          renderLineChart("#avgdmggiven", "line");
      </script>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">
      <h3><b>Total Damage Taken</b></h3>
      <div id="container">
        <canvas id="latesttotaldmgtaken" data-url="{% url 'latesttotaldmgtaken' %}"></canvas>
      </div>
      <script>
          renderPieChart("#latesttotaldmgtaken");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Total Damage Taken Over Time</b></h3>
      <div id="container">
        <canvas id="totaldmgtaken" data-url="{% url 'totaldmgtaken' %}"></canvas>
      </div>
      <script>
          renderLineChart("#totaldmgtaken", "line");
      </script>
    </div>
    <div class="col-md-4">
      <h3><b>Avg. Damage Taken Over Time</b></h3>
      <div id="container">
        <canvas id="avgdmgtaken" data-url="{% url 'avgdmgtaken' %}"></canvas>
      </div>
      <script>
          renderLineChart("#avgdmgtaken", "line");
      </script>
    </div>
  </div>
  <div class="jumbotron text-center">
    <div class="container">
      <a href="/" class="lang-logo">
        <img src="{% static 'smash-ball-logo.png'%}">
      </a>
      <h1>Smash Ultimate Stat Tracker</h1>
      <p>Tracks a variety of stats for Smash Ultimate games and displays a leaderboard! :)</p>
      <a type="button" target="_blank" class="btn btn-lg btn-default" onclick="location.href='{% url 'importdata' %}'"><span class="glyphicon glyphicon-flash"></span>Import Data</a>
      <a type="button" target="_blank" class="btn btn-lg btn-primary" onclick="location.href='{% url 'runanalytics' %}'"><span class="glyphicon glyphicon-download"></span>Run Analytics</a>
      <a type="button" target="_blank" class="btn btn-lg btn-primary" onclick="location.href='{% url 'generateleaderboard' %}'"><span class="glyphicon glyphicon-flash"></span>Generate Leaderboard</a>
    </div>
  </div>
</div>

{% endblock %}
